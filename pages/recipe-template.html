<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      groupName="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title id="recipe-title">Recipe</title>
    <link rel="stylesheet" href="../styles.css" />
  </head>
  <body>
    <div class="recipe">
      <div class="header">
        <h2 id="recipe-groupName"></h2>
        <div id="recipe-description"></div>
        <div>
          <span class="time">Prep: </span>
          <span id="recipe-prep"></span>
          <span class="time">Cook: </span>
          <span id="recipe-cook"></span>
          <span class="time">Total: </span>
          <span id="recipe-total"></span>
        </div>
        <div>
          <img id="recipe-image" />
        </div>
      </div>
      <div id="recipe-main">
        <div id="recipe-ingredients">
          <h3>Ingredients</h3>
        </div>
        <div id="recipe-instructions">
          <h3>Instructions</h3>
        </div>
      </div>
    </div>
    <script>
      const params = new URLSearchParams(window.location.search);
      const recipeName = params.get('name');

      const render = (recipe) => {
        document.getElementById('recipe-title').textContent = recipe.title;
        document.getElementById('recipe-groupName').textContent = recipe.title;
        document.getElementById('recipe-description').textContent =
          recipe.description;
        document.getElementById('recipe-prep').textContent = recipe.time.prep;
        document.getElementById('recipe-cook').textContent = recipe.time.cook;
        document.getElementById('recipe-total').textContent = recipe.time.total;
        document.getElementById('recipe-image').src = recipe.image_link;

        const ingredients = document.getElementById('recipe-ingredients');
        for (const ingrendientGroup in recipe.ingredients) {
          const group = document.createElement('div');
          if (ingrendientGroup != 'main') {
            const groupName = document.createElement('h4');
            groupName.textContent = ingrendientGroup;
            group.appendChild(groupName);
          }
          ingredients.appendChild(group);
        }
      };

      fetch('../public/data.json')
        .then((res) => res.json())
        .then((data) => {
          const recipe = data.find((r) => r.title === recipeName);
          if (recipe) {
            render(recipe);
          } else {
            console.error('Recipe not found');
          }
        })
        .catch((error) =>
          console.error('Error fetching the JSON file:', error)
        );
    </script>
  </body>
</html>
